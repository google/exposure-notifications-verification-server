{{define "realms/select"}}

{{$csrfField := .csrfField}}
{{$realms := .realms}}
{{$currentRealm := .currentRealm}}

<!doctype html>
<html lang="en">
<head>
  {{template "head" .}}
</head>

<body class="bg-light">
  {{template "navbar" .}}

  <main role="main" class="container">
    {{template "flash" .}}

    <h1>Select your realm</h1>
    {{if $realms}}
      <p class="mb-3">
        You are a member of multiple realms - please select one to continue. You
        can switch to another realm at any time.
      </p>

      <div class="list-group mb-3">
      {{range $realm := $realms}}
        <form action="/login/select-realm" method="POST">
          {{$csrfField}}
          <input type="hidden" name="realm" value="{{$realm.ID}}" />
          <a href="#" class="w-100 d-flex flex-row justify-content-between align-items-center align-self-center list-group-item list-group-item-action" data-submit-form>
            <div>
              <h5 class="mb-1">
                {{$realm.Name}}
                {{if $currentRealm}}{{if eq $currentRealm.ID $realm.ID}}
                <span class="badge badge-secondary float-right ml-2">currently selected</span>
                {{end}}{{end}}
              </h5>
              {{if $realm.RegionCode}}
              <p class="mb-1">{{$realm.RegionCode}}</p>
              {{end}}
            </div>
            <div>
              <span class="oi oi-arrow-right" aria-hidden="true"></span>
            </div>
          </a>
        </form>
      {{end}}
      </div>
    {{else}}
      <p class="mb-3">
        You are not a member of any realms. Contact your realm administrator for
        assistance.
      </p>
    {{end}}
  </main>

  {{template "scripts" .}}
</body>
</html>
{{end}}

{{define "firebase"}}
{{- if .firebase}}
<script defer src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>

<script defer type="text/javascript">
  const firebaseConfig = {
    apiKey: "{{.firebase.APIKey}}",
    projectId: "{{.firebase.ProjectID}}",
    authDomain: "{{.firebase.AuthDomain}}",
    databaseURL: "https://{{.firebase.DatabaseURL}}",
    projectId: "{{.firebase.ProjectID}}",
    storageBucket: "{{.firebase.StorageBucket}}",
    messagingSenderId: "{{.firebase.MessageSenderID}}",
    appId: "{{.firebase.AppID}}"
  };

  window.addEventListener('load', () => {
    firebase.initializeApp(firebaseConfig);

    // Disable the firebase cookie - we manage the ID token on the server side.
    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);
  })
</script>
{{end}}
{{end}}
